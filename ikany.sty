\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{ikany}[2018/10/29 ikany]

\makeatletter

% TODO
%  automatic parentheses command
%  cls file화
%  prb class 맘에 안들어

 %  A note for xparse
 %   If a command has defined, then
 %     New     : error
 %     Renew   : define
 %     Declare : define
 %     Provide : not define
 %   If a command has "not" defined, then
 %     New     : define
 %     Renew   : error
 %     Declare : define
 %     Provide : define


\RequirePackage{amsfonts,amsmath,amssymb}
%\RequirePackage[many]{tcolorbox}












% Theorems and Proofs
\RequirePackage{amsthm,xparse}
\theoremstyle{plain}
  \newtheorem{thm}{Theorem}[section]
  \newtheorem*{thm*}{Theorem}
  \newtheorem{prop}[thm]{Proposition}
  \newtheorem*{prop*}{Proposition}
  \newtheorem{cor}[thm]{Corollary}
  \newtheorem{lem}[thm]{Lemma}
\theoremstyle{definition}
  \newtheorem{defn}{Definition}[section]
  \newtheorem{ex}[thm]{Example}
  \newtheorem{prb}{Problem}[section]
\theoremstyle{remark}
  \newtheorem*{rmk}{Remark}

\newenvironment{pf}[1][\unskip]{\begin{proof}[Proof #1]}{\end{proof}}
\newenvironment{sol}[1][\unskip]{\begin{proof}[Solution #1]}{\end{proof}}
\newenvironment{note}[1][\unskip]{\begin{proof}[Note #1]\renewcommand{\qedsymbol}{}}{\end{proof}}
\newenvironment{idea}[1][\unskip]{\begin{proof}[Proof idea #1]\renewcommand{\qedsymbol}{}}{\end{proof}}
\DeclareDocumentCommand{\Case}{ r[] +g }{\emph{Case #1: #2.}}
\DeclareDocumentCommand{\Step}{ r[] +g }{\emph{Step #1: #2.}}

\ifx\thisisprbcls\undefined\else
  \renewcommand{\theprb}{\arabic{section}.\arabic{prb}}
  \renewenvironment{sol}[1][\unskip]{\noindent\textbf{Solution.}\par\begin{cond}}{\end{cond}\hfill\qedsymbol}
\fi

\iffalse % Example code
	\begin{ex}
	Here is an example.
	\end{ex}
	\begin{pf}
	\Case[1] Easy.
	\Case[2]{When $p=2$.} Not easy
	\end{pf}
\fi






% List environments
\RequirePackage{enumitem}
\newlist{cond}{enumerate}{1}
  \setlist[cond,1]{label=\rm{(\arabic*)}}
\newlist{exer}{enumerate}{2}
  \setlist[exer,1]{label=\arabic*.,before={\large Exercises}}
  \setlist[exer,2]{label=(\alph*)}

\let\@@item\item
\newcommand{\sitem}{\refstepcounter{\@enumctr}\@@item[$^*$\csname label\@enumctr\endcsname]}
\renewcommand*{\item}{\@ifstar\sitem\@@item}

\let\q\item

\iffalse % Example code
	\begin{exer}
	\q  easy problem
	\q* hard problem
	\begin{exer}
	\q subproblem
	\end{exer}
	\end{exer}
\fi













% Commutative diagrams
\RequirePackage{tikz-cd,xparse}
\NewDocumentEnvironment{cd}{}
  {
    \renewcommand{\mn}{\ar[tail]}
    \renewcommand{\ep}{\ar[two heads]}
    \[\begin{tikzcd}
  }
  {\end{tikzcd}\]}
\NewDocumentEnvironment{es}{}
  {
    \renewcommand{\>}{\ar{r}\&}
    \renewcommand{\mn}{\ar[tail]}
    \renewcommand{\ep}{\ar[two heads]}
    \tikzcdset{column sep=small,ampersand replacement=\&}
    \[\begin{tikzcd}
  }
  {\end{tikzcd}\]}
\NewDocumentEnvironment{rd}{}
  {
    \tikzcdset{math mode=false,labels={font=\scriptsize}}
    \[\begin{tikzcd}
  }
  {\end{tikzcd}\]}
  
\newcommand{\block}[1]{\begin{tabular}{c}#1\end{tabular}}
\def\lar{\ar[bend left]}
\def\rar{\ar[bend right,swap]}
\def\ds{\ar[dashed]}
\def\lds{\ar[dashed,bend left]}
\def\rds{\ar[dashed,bend right,swap]}
\def\hk{\ar[hook]}

%	\begin{es}  0 \> A \> B \> C \> 0  \end{es}
\iffalse % Example code
	\begin{cd}[row sep={24pt,between origins}, column sep={36pt,between origins}]
	A \ds[swap,\exists !]{r} & B \mn{r} & C \ar[dashed]{r}{text} & D
	\end{cd}
\fi
















% Differential operators
\RequirePackage{xparse}
\NewDocumentCommand{\pd}{ o g g g }{
  \IfNoValueTF{#2}
  {\partial \IfNoValueTF{#1}{}{^{#1}}}
  {
    \IfNoValueTF{#3}
    {\frac{\partial\IfNoValueTF{#1}{}{^{#1}}}{\partial#2\IfNoValueTF{#1}{}{^{#1}}}}
    {
      \IfNoValueTF{#4}
      {\frac{\partial\IfNoValueTF{#1}{}{^{#1}}#2}{\partial#3\IfNoValueTF{#1}{}{^{#1}}}}
      {\frac{\partial^2#2}{\partial#3\,\partial#4}}
    }
  }
}
\NewDocumentCommand{\dd}{ o g g g }{
  \IfNoValueTF{#3}
  {\frac{d\IfNoValueTF{#1}{}{^{#1}}}{d#2\IfNoValueTF{#1}{}{^{#1}}}}
  {
    \IfNoValueTF{#4}
    {\frac{d\IfNoValueTF{#1}{}{^{#1}}#2}{d#3\IfNoValueTF{#1}{}{^{#1}}}}
    {\frac{d^2#2}{d#3\,d#4}}
  }
}
\let\del\nabla % del
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\curl}{curl}
\let\division\div
\let\div\relax
\DeclareMathOperator{\div}{div}

%	\pd[2]{x}
%	\pd[2]{f}{x}
%	\pd{f}{x}{y}









% system of equations
\RequirePackage{xparse}
\DeclareDocumentEnvironment{syseq}{s}
{
  \[\left\{\begin{alignedat}{2}
  \renewcommand{\for}{&\qquad&}
}
{
  \IfBooleanTF{#1}
    {\end{alignedat}\right.\]}
    {\end{alignedat}\right.\stepcounter{equation}\tag{\theequation}\]}
}
\ExplSyntaxOn
\cs_new:cpn{syseq*}{\syseq*}
\cs_new_eq:cN{endsyseq*}\endsyseq
\ExplSyntaxOff

% align이나 alignat이 environment에 들어가서 \end{syseqs}를 뺏어버렸다.... 언제 고치지
\RequirePackage[overload]{empheq}
\NewDocumentEnvironment{syseqs}{}
{
  \begin{subequations}
  \begin{alignat}{2}[left={\empheqlbrace\,}]
}
{
  \end{alignat}
  \end{subequations}
}


%	\begin{syseq}{\label{eq:Pois}}
%	\Delta u(x)&=0,	\for x\in\Omega,\\
%	u(x)&=f, 			\for x\in\bd\Omega.
%	\end{pde}


















% Matrices shortcut
\newcommand{\mat}[2][b]{%
  \begin{#1matrix}
    #2
  \end{#1matrix}
}
% option:p,b,B,v,V























% Parantheses    고치자
\RequirePackage{xparse}
\DeclareDocumentCommand{\abs}{m}{\left\lvert#1\right\rvert}
\DeclareDocumentCommand{\norm}{m}{\left\lVert#1\right\rVert}
\DeclareDocumentCommand{\flr}{m}{\left\lfloor#1\right\rfloor}
\DeclareDocumentCommand{\ceil}{m}{\left\lceil#1\right\rceil}
\DeclareDocumentCommand{\inn}{mg}{\IfNoValueTF{#2}{\left\langle#1\right\rangle}{\left\langle#1,#2\right\rangle}}
























%% Shorthands for Notations

% Binary operators
\let\.\cdot % dot product
\let\o\circ % function composition
\let\x\times % cross product
\let\dsum\oplus % direct sum
\let\tn\otimes % tensor product
\let\wdg\wedge % wedge
\let\smsh\vee

% Arrows
\let\@@to\to
\RenewDocumentCommand{\to}{g}{\IfNoValueTF{#1}{\@@to}{\overset{#1}{\@@to}}}
\let\emb\hookrightarrow
\let\mn\rightarrowtail
\let\ep\twoheadrightarrow
\let\acts\curvearrowright

% Relations
\let\les\lesssim
\let\hmtp\simeq
\let\isom\cong

% Big operators
\let\bigdsum\bigoplus
\let\bigtn\bigotimes

% Diacritics
\let\cl\overline % bar (closure)
\let\conj\overline
\let\hat\widehat % hat
\let\tld\widetilde % tilde

% Standalone notations
\let\bul\bullet % bullet
\let\oo\infty % infinity
\let\mt\varnothing % emptyset
\let\bd\partial % boundary
\def\1{\bold{1}} % characteristic function

% 기타
\let\bigmath\displaystyle
\def\for{\qquad}
\def\cat{\mathbf}
\def\impl{\mathchoice{\quad\Longrightarrow\quad}{\,\Rightarrow\,}{\,\Rightarrow\,}{\,\Rightarrow\,}}
\renewcommand{\iff}{\mathchoice{\quad\Longleftrightarrow\quad}{\,\Leftrightarrow\,}{\,\Leftrightarrow\,}{\,\Leftrightarrow\,}}
\NewDocumentCommand{\evalat}{mmg}{\left.#1\right\rvert_{#2}\IfNoValueTF{}{^{#3}}}




%% Shorthands for Alphabets

% Some greeks
\def\e{\varepsilon}
\def\f{\varphi}

% Blackboard fonts
\def\A{\mathbb{A}}
\def\B{\mathbb{B}}
\def\C{\mathbb{C}}
\def\E{\mathbb{E}}
\def\F{\mathbb{F}}
\def\G{\mathbb{G}}
\def\H{\mathbb{H}}
\def\N{\mathbb{N}}
\def\P{\mathbb{P}}
\def\Q{\mathbb{Q}}
\def\R{\mathbb{R}}
\def\T{\mathbb{T}}
\def\Z{\mathbb{Z}}

% Bold fonts
\def\bA{\mathbf{A}}
\def\bB{\mathbf{B}}
\def\bC{\mathbf{C}}
\def\bD{\mathbf{D}}
\def\bE{\mathbf{E}}
\def\bF{\mathbf{F}}
\def\bG{\mathbf{G}}
\def\bH{\mathbf{H}}
\def\bI{\mathbf{I}}
\def\bJ{\mathbf{J}}
\def\bK{\mathbf{K}}
\def\bL{\mathbf{L}}
\def\bM{\mathbf{M}}
\def\bN{\mathbf{N}}
\def\bO{\mathbf{O}}
\def\bP{\mathbf{P}}
\def\bQ{\mathbf{Z}}
\def\bR{\mathbf{R}}
\def\bS{\mathbf{S}}
\def\bT{\mathbf{T}}
\def\bU{\mathbf{U}}
\def\bV{\mathbf{V}}
\def\bW{\mathbf{W}}
\def\bX{\mathbf{X}}
\def\bY{\mathbf{Y}}
\def\bZ{\mathbf{Z}}

% Caligraphy fonts
\def\cA{\mathcal{A}}
\def\cB{\mathcal{B}}
\def\cC{\mathcal{C}}
\def\cD{\mathcal{D}}
\def\cE{\mathcal{E}}
\def\cF{\mathcal{F}}
\def\cG{\mathcal{G}}
\def\cH{\mathcal{H}}
\def\cI{\mathcal{I}}
\def\cJ{\mathcal{J}}
\def\cK{\mathcal{K}}
\def\cL{\mathcal{L}}
\def\cM{\mathcal{M}}
\def\cN{\mathcal{N}}
\def\cO{\mathcal{O}}
\def\cP{\mathcal{P}}
\def\cQ{\mathcal{Q}}
\def\cR{\mathcal{R}}
\def\cS{\mathcal{S}}
\def\cT{\mathcal{T}}
\def\cU{\mathcal{U}}
\def\cV{\mathcal{V}}
\def\cW{\mathcal{W}}
\def\cX{\mathcal{X}}
\def\cY{\mathcal{Y}}
\def\cZ{\mathcal{Z}}

% Fraktur fonts
\def\fA{\mathfrak{A}}
\def\fB{\mathfrak{B}}
\def\fC{\mathfrak{C}}
\def\fD{\mathfrak{D}}
\def\fE{\mathfrak{E}}
\def\fF{\mathfrak{F}}
\def\fG{\mathfrak{G}}
\def\fH{\mathfrak{H}}
\def\fI{\mathfrak{I}}
\def\fJ{\mathfrak{J}}
\def\fK{\mathfrak{K}}
\def\fL{\mathfrak{L}}
\def\fM{\mathfrak{M}}
\def\fN{\mathfrak{N}}
\def\fO{\mathfrak{O}}
\def\fP{\mathfrak{P}}
\def\fQ{\mathfrak{Q}}
\def\fR{\mathfrak{R}}
\def\fS{\mathfrak{S}}
\def\fT{\mathfrak{T}}
\def\fU{\mathfrak{U}}
\def\fV{\mathfrak{V}}
\def\fW{\mathfrak{W}}
\def\fX{\mathfrak{X}}
\def\fY{\mathfrak{Y}}
\def\fZ{\mathfrak{Z}}
\def\fa{\mathfrak{a}}
\def\fb{\mathfrak{b}}
\def\fc{\mathfrak{c}}
\def\ff{\mathfrak{f}}
\def\fg{\mathfrak{g}}
\def\fh{\mathfrak{h}}
\def\fm{\mathfrak{m}}
\def\fp{\mathfrak{p}}
\def\fq{\mathfrak{q}}
\def\fu{\mathfrak{u}}

% Lie theory
\newcommand{\fgl}{\mathfrak{gl}}
\newcommand{\fsl}{\mathfrak{sl}}
\newcommand{\fso}{\mathfrak{so}}
\newcommand{\fsu}{\mathfrak{su}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\SL}{\mathrm{SL}}
\newcommand{\SO}{\mathrm{SO}}
\newcommand{\SU}{\mathrm{SU}}
%\newcommand{\U}{\mathrm{U}}                   % beamer충돌, hyperref충돌
\newcommand{\PGL}{\mathrm{PGL}}
\newcommand{\PSL}{\mathrm{PSL}}
\newcommand{\PSO}{\mathrm{PSO}}
\newcommand{\PSU}{\mathrm{PSU}}
\newcommand{\Sp}{\mathrm{Sp}}
\newcommand{\Spin}{\mathrm{Spin}}
\newcommand{\Mat}{\mathrm{Mat}}

% Miscellany
\let\Re\relax
\let\Im\relax
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\adj}{adj}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator*{\colim}{colim}
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\Diff}{Diff}
\DeclareMathOperator{\disc}{disc}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\eval}{eval}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Fix}{Fix}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Hess}{Hess}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Im}{Im}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Lip}{Lip}
\DeclareMathOperator{\Orb}{Orb}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\pv}{p.v.}
\DeclareMathOperator{\Re}{Re}
\DeclareMathOperator{\rel}{rel}
\DeclareMathOperator*{\res}{res}
\DeclareMathOperator{\rk}{rk}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Syl}{Syl}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\Tr}{Tr}

\makeatother

\endinput